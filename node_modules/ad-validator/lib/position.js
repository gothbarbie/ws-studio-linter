exports.add = add;
exports.copy = copy;
exports.initial = initial;
exports.move = move;

function add( p1, p2 ) {
	return {
		index: p1.index + p2.index,
		line: p1.line + p2.line,
		column: ( p2.line ? 0 : p1.column ) + p2.column
	};
}

function column( length ) {
	return {
		index: length,
		line: 0,
		column: length,
	};
}

function initial() {
	return { index: 0, line: 0, column: 0 };
}

function copy( pos ) {
	return {
		index: pos.index,
		line: pos.line,
		column: pos.column
	};
}

function move( position, delta ) {
	if ( typeof delta === 'number' ) {
		return add( position, column( delta ) );
	}

	const lines = delta.split( '\n' );
	const col = lines.pop().length;

	const other = {
		index: delta.length,
		line: lines.length,
		column: col,
	};

	return add( position, other );
}
